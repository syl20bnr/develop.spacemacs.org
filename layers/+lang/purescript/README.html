<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-03-06 Sun 16:49 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Purescript layer</title>
<meta name="author" content="root" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
</style>
<link rel="stylesheet" type="text/css"
                 href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
          <script src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
          <script>
          // Google Analytics
                     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
                         Date();a=s.createElement(o),
                         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                     ga('create', 'UA-28326243-2', 'auto'); ga('send', 'pageview');

          // Add permalinks to the documentation headings
          $(document).ready(function() {
              [".outline-2 h2", ".outline-3 h3", ".outline-4 h4", ".outline-5 h5"].forEach(function(i) {
                  $(i).each(function() {
                          var page_url = window.location.pathname;
                          var node = $(this).attr("id");
                          var full_url = page_url + "#" + node;
                          $(this).contents().last().after('<span id="permalink"><a href="'
                                                          + full_url + '">Â¶</a></span>');
                  });
              });
          });
          </script>
<link rel="stylesheet" type="text/css" href="../../../css/readtheorg.css" />
</head>
<body>
<div id="content" class="content">
<div class="admonition warning">
<p class="first last">
You are viewing the documentation for the develop branch.
The documentation for the release version is
<a href="https://www.spacemacs.org/doc/DOCUMENTATION.html"
onclick="location='https://www.spacemacs.org'+location.pathname+location.search+location.hash;return false;">here</a>
.
</p>
</div>
<div id="toggle-sidebar"><a href="#table-of-contents"><h2>Table of Contents</h2></a></div>
<h1 class="title">Purescript layer</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents<a href="#">Close</a></h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#description">1. Description</a>
<ul>
<li><a href="#features">1.1. Features:</a></li>
</ul>
</li>
<li><a href="#install">2. Install</a></li>
<li><a href="#configuration">3. Configuration</a>
<ul>
<li><a href="#formatting">3.1. Formatting</a></li>
<li><a href="#add-import-on-completion">3.2. Add import on completion</a></li>
<li><a href="#node-modules">3.3. Node Modules</a></li>
<li><a href="#error-popup">3.4. Error popup</a></li>
<li><a href="#lsp">3.5. LSP</a></li>
</ul>
</li>
<li><a href="#key-bindings">4. Key bindings</a>
<ul>
<li><a href="#purescript">4.1. Purescript</a>
<ul>
<li><a href="#imports">4.1.1. Imports</a></li>
<li><a href="#psc-ide">4.1.2. psc-ide</a></li>
<li><a href="#formatting-1">4.1.3. Formatting</a></li>
</ul>
</li>
<li><a href="#repl">4.2. REPL</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="org9cea644" class="figure">
<p><img src="img/purescript-logo.png" alt="purescript-logo.png" />
</p>
</div>

<div id="outline-container-description" class="outline-2">
<h2 id="description"><span class="section-number-2">1.</span> Description</h2>
<div class="outline-text-2" id="text-description">
<p>
This layer provides basic Purescript editing support for spacemacs.
</p>
</div>

<div id="outline-container-features" class="outline-3">
<h3 id="features"><span class="section-number-3">1.1.</span> Features:</h3>
<div class="outline-text-3" id="text-features">
<ul class="org-ul">
<li>Syntax highlighting through <a href="https://github.com/dysinger/purescript-mode">purescript-mode</a></li>
<li>Automatic insert of imports through <a href="https://github.com/epost/psc-ide-emacs">psc-ide-emacs</a></li>
<li>REPL through <a href="https://github.com/ardumont/emacs-psci">psci</a></li>
<li>Syntax checking through flycheck</li>
<li>Autocompletion through company</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-install" class="outline-2">
<h2 id="install"><span class="section-number-2">2.</span> Install</h2>
<div class="outline-text-2" id="text-install">
<p>
To use this configuration layer, add it to your <code>~/.spacemacs</code>. You will need to
add <code>purescript</code> to the existing <code>dotspacemacs-configuration-layers</code> list in
this file.
</p>

<p>
You'll also need to make sure the PureScript compiler and its associated
binaries (psc-ide-server, psci,&#x2026;) are on your path. Installation instructions
can be found <a href="https://github.com/purescript/documentation/blob/master/guides/Getting-Started.md">here</a>.
</p>
</div>
</div>

<div id="outline-container-configuration" class="outline-2">
<h2 id="configuration"><span class="section-number-2">3.</span> Configuration</h2>
<div class="outline-text-2" id="text-configuration">
</div>

<div id="outline-container-formatting" class="outline-3">
<h3 id="formatting"><span class="section-number-3">3.1.</span> Formatting</h3>
<div class="outline-text-3" id="text-formatting">
<p>
The following formatting tools are currently supported:
</p>
<ul class="org-ul">
<li><code>purs-tidy</code> (default): [ <a href="https://github.com/natefaubion/purescript-tidy">https://github.com/natefaubion/purescript-tidy</a> ][Purs-tidy]]</li>
</ul>

<p>
You can choose the formatting tool by setting <code>purescript-fmt-tool</code>
variable in your <code>purescript</code> config section:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers '(
  (purescript <span class="org-builtin">:variables</span>
              purescript-fmt-tool 'purs-tidy)))
</pre>
</div>

<p>
You can run the formatter manually with either `M-x spacemacs/purescript-format`
or with the shortcut `SPC m =`.
</p>

<p>
To enable automatic formatting of the buffer on save, enable <code>purescript-fmt-on-save</code>
variable in your <code>purescript</code> config section:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers '(
  (purescript <span class="org-builtin">:variables</span>
              purescript-fmt-on-save t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-add-import-on-completion" class="outline-3">
<h3 id="add-import-on-completion"><span class="section-number-3">3.2.</span> Add import on completion</h3>
<div class="outline-text-3" id="text-add-import-on-completion">
<p>
Set <code>purescript-add-import-on-completion</code> to nil to make <code>psc-ide</code> stop adding
imports on completion. Default value is <code>t</code>.
</p>
</div>
</div>

<div id="outline-container-node-modules" class="outline-3">
<h3 id="node-modules"><span class="section-number-3">3.3.</span> Node Modules</h3>
<div class="outline-text-3" id="text-node-modules">
<p>
If you would like <code>node_modules/.bin</code> to be automatically added to the buffer
local <code>exec_path</code>, e.g. to support project local purs/pulp installations, set the
<code>node-add-modules-path</code> variable in the <code>purescript</code> config section. Note that
doing this <a href="https://stackoverflow.com/questions/9679932#comment33532258_9683472">introduces a security risk</a>:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers
  '((purescript <span class="org-builtin">:variables</span> node-add-modules-path t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-error-popup" class="outline-3">
<h3 id="error-popup"><span class="section-number-3">3.4.</span> Error popup</h3>
<div class="outline-text-3" id="text-error-popup">
<p>
If you set <code>purescript-enable-rebuild-on-save</code> to non-nil, you will get a popup
buffer showing you your current warnings/errors one at a time. This is primarily
meant as an alternative to using flycheck. Default value is nil.
</p>
</div>
</div>

<div id="outline-container-lsp" class="outline-3">
<h3 id="lsp"><span class="section-number-3">3.5.</span> LSP</h3>
<div class="outline-text-3" id="text-lsp">
<p>
For proper IDE support this backend should be used. It is
based on an external server which will be started automatically
by emacs, once an purescript file is opened. The key bindings are
the same for all lsp modes so if you are already familiar with
one you should be able to work the same in all modes.
</p>

<p>
To set explicitly do the following in your dotfile:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(purescript <span class="org-builtin">:variables</span>
        purescript-backend 'lsp)
</pre>
</div>

<p>
For this to work you will also need to install
the lsp server and separate dependencies with below
command:
</p>

<div class="org-src-container">
<pre class="src src-sh">npm i -g purescript-language-server
</pre>
</div>

<p>
NOTE: Key bindings for LSP are defined in the
LSP layer. Also it is advisable to have a look
at the autocomplete layer for an optimal
intellisense config for LSP.
</p>
</div>
</div>
</div>

<div id="outline-container-key-bindings" class="outline-2">
<h2 id="key-bindings"><span class="section-number-2">4.</span> Key bindings</h2>
<div class="outline-text-2" id="text-key-bindings">
</div>

<div id="outline-container-purescript" class="outline-3">
<h3 id="purescript"><span class="section-number-3">4.1.</span> Purescript</h3>
<div class="outline-text-3" id="text-purescript">
</div>

<div id="outline-container-imports" class="outline-4">
<h4 id="imports"><span class="section-number-4">4.1.1.</span> Imports</h4>
<div class="outline-text-4" id="text-imports">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m i =</code></td>
<td class="org-left">Format imports</td>
</tr>

<tr>
<td class="org-left"><code>SPC m i \</code></td>
<td class="org-left">Return to where you were editing before navigating to imports</td>
</tr>

<tr>
<td class="org-left"><code>SPC m i a</code></td>
<td class="org-left">Align imports</td>
</tr>

<tr>
<td class="org-left"><code>SPC m i n</code></td>
<td class="org-left">Navigate to the imports</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-psc-ide" class="outline-4">
<h4 id="psc-ide"><span class="section-number-4">4.1.2.</span> psc-ide</h4>
<div class="outline-text-4" id="text-psc-ide">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m m s</code></td>
<td class="org-left">Start psc-ide-server</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m q</code></td>
<td class="org-left">Quit the current psc-ide-server</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m l</code></td>
<td class="org-left">Load definitions for the modules inside your project</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m b</code></td>
<td class="org-left">Rebuilds the current file and displays any warnings or errors</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m t</code></td>
<td class="org-left">Add a new clause for the function signature at point</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m c</code></td>
<td class="org-left">Casesplits on the identifier at the current cursor position</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m L</code></td>
<td class="org-left">Load a specific module (This is mostly used for troubleshooting)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m i a</code></td>
<td class="org-left">Add an import for the identifier at the current cursor position</td>
</tr>

<tr>
<td class="org-left"><code>SPC m m i s</code></td>
<td class="org-left">Inserts a suggestion for the warning/error at the current cursor position</td>
</tr>

<tr>
<td class="org-left"><code>SPC m h t</code></td>
<td class="org-left">Show type at point</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g g</code></td>
<td class="org-left">Goto definition for identifier at point</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-formatting-1" class="outline-4">
<h4 id="formatting-1"><span class="section-number-4">4.1.3.</span> Formatting</h4>
<div class="outline-text-4" id="text-formatting-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m =</code></td>
<td class="org-left">Format the buffer</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-repl" class="outline-3">
<h3 id="repl"><span class="section-number-3">4.2.</span> REPL</h3>
<div class="outline-text-3" id="text-repl">
<p>
<a href="https://github.com/ardumont/emacs-psci">psci</a> provides a very basic REPL for purescript. The following key
bindings are available:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m s b</code></td>
<td class="org-left">Equivalent of <code>:m /path/to/current/module/file.purs</code> - Load &lt;file&gt; for importing</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s i</code></td>
<td class="org-left">Launch a psci console buffer</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s m</code></td>
<td class="org-left">Equivalent of <code>:i your.current.module.name</code> - Import &lt;module&gt; for use in PSCI</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s p</code></td>
<td class="org-left">Load or reload files defined in the project file .psci</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: root</p>
<p class="date">Created: 2022-03-06 Sun 16:49</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
