<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-07-10 Sat 13:13 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ruby layer</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="root" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css"
                 href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
          <script src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
          <script>
          // Google Analytics
                     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
                         Date();a=s.createElement(o),
                         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                     ga('create', 'UA-28326243-2', 'auto'); ga('send', 'pageview');

          // Add permalinks to the documentation headings
          $(document).ready(function() {
              [".outline-2 h2", ".outline-3 h3", ".outline-4 h4", ".outline-5 h5"].forEach(function(i) {
                  $(i).each(function() {
                          var page_url = window.location.pathname;
                          var node = $(this).attr("id");
                          var full_url = page_url + "#" + node;
                          $(this).contents().last().after('<span id="permalink"><a href="'
                                                          + full_url + '">¶</a></span>');
                  });
              });
          });
          </script>
<link rel="stylesheet" type="text/css" href="../../../css/readtheorg.css" />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<div id="toggle-sidebar"><a href="#table-of-contents"><h2>Table of Contents</h2></a></div>
<h1 class="title">Ruby layer</h1>
<div id="table-of-contents">
<h2>Table of Contents<a href="#">Close</a></h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#description">1. Description</a>
<ul>
<li><a href="#features">1.1. Features:</a></li>
</ul>
</li>
<li><a href="#install">2. Install</a>
<ul>
<li><a href="#choosing-a-backend">2.1. Choosing a backend</a>
<ul>
<li><a href="#robe">2.1.1. Robe</a></li>
<li><a href="#language-server-protocol">2.1.2. Language Server Protocol</a></li>
</ul>
</li>
<li><a href="#prerequisites">2.2. Prerequisites</a></li>
<li><a href="#ruby-version-management">2.3. Ruby version management</a></li>
<li><a href="#test-runner">2.4. Test runner</a></li>
<li><a href="#formatting">2.5. Formatting</a></li>
</ul>
</li>
<li><a href="#key-bindings">3. Key bindings</a>
<ul>
<li><a href="#ruby-enh-ruby-mode-robe-inf-ruby-ruby-tools">3.1. Ruby (enh-ruby-mode, robe, inf-ruby, ruby-tools)</a></li>
<li><a href="#debugger">3.2. Debugger</a></li>
<li><a href="#bundler">3.3. Bundler</a></li>
<li><a href="#rubocop">3.4. RuboCop</a></li>
<li><a href="#tests">3.5. Tests</a>
<ul>
<li><a href="#rspec-mode">3.5.1. RSpec-mode</a></li>
<li><a href="#ruby-test-mode">3.5.2. Ruby-test-mode</a></li>
<li><a href="#minitest-mode">3.5.3. minitest-mode</a></li>
</ul>
</li>
<li><a href="#toggles">3.6. Toggles</a></li>
<li><a href="#rake">3.7. Rake</a></li>
<li><a href="#refactor">3.8. Refactor</a></li>
<li><a href="#seeing-is-believing">3.9. Seeing is believing</a></li>
</ul>
</li>
<li><a href="#configuration">4. Configuration</a>
<ul>
<li><a href="#layer-options">4.1. Layer options</a></li>
<li><a href="#disabling-the-automatic-insertion-of-encoding-comment">4.2. Disabling the automatic insertion of encoding comment</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="org86bdbfb" class="figure">
<p><img src="img/ruby.png" alt="ruby.png" />
</p>
</div>

<div id="outline-container-description" class="outline-2">
<h2 id="description"><span class="section-number-2">1.</span> Description</h2>
<div class="outline-text-2" id="text-description">
<p>
This layer provides support for the Ruby programming language.
</p>
</div>

<div id="outline-container-features" class="outline-3">
<h3 id="features"><span class="section-number-3">1.1.</span> Features:</h3>
<div class="outline-text-3" id="text-features">
<ul class="org-ul">
<li>Version manager (rbenv, rvm or chruby)</li>
<li>Integration with bundler</li>
<li>Test runner (ruby-test and rspec)</li>
<li>Rake runner</li>
<li>Linter (rubocop)</li>
<li>Formatter (prettier)</li>
<li>Interactive REPL and code navigation (robe)</li>
<li>Interactive debugger using <a href="https://github.com/emacs-lsp/dap-mode">dap-mode</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-install" class="outline-2">
<h2 id="install"><span class="section-number-2">2.</span> Install</h2>
<div class="outline-text-2" id="text-install">
<p>
To use this configuration layer, add it to your <code>~/.spacemacs</code>. You will need to
add <code>ruby</code> to the existing <code>dotspacemacs-configuration-layers</code> list in this
file.
</p>

<p>
This layer supports two different Ruby modes: Emacs's built-in Ruby Mode and
<a href="https://github.com/zenspider/enhanced-ruby-mode">enh-ruby-mode</a>. By default the built-in Ruby mode is enabled. To switch to the
<code>enh-ruby-mode</code> set <code>ruby-enable-enh-ruby-mode</code> to t:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">dotspacemacs-configuration-layers</span> <span class="org-rainbow-delimiters-depth-2">()</span>
   '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>ruby <span class="org-builtin">:variables</span> ruby-enable-enh-ruby-mode t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-choosing-a-backend" class="outline-3">
<h3 id="choosing-a-backend"><span class="section-number-3">2.1.</span> Choosing a backend</h3>
<div class="outline-text-3" id="text-choosing-a-backend">
<p>
To choose a default backend set the layer variable <code>ruby-backend</code>:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span>ruby <span class="org-builtin">:variables</span> ruby-backend 'robe<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Alternatively the <code>lsp</code> backend will be automatically chosen if the layer <code>lsp</code>
is used and you did not specify any value for <code>ruby-backend</code>.
</p>

<p>
Backend can be chosen on a per project basis using directory local variables
(files named <code>.dir-locals.el</code> at the root of a project), an example to use the
<code>lsp</code> backend:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">Directory Local Variables</span>
<span class="org-comment-delimiter">;;; </span><span class="org-comment">For more information see (info "(emacs) Directory Variables")</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>ruby-mode <span class="org-rainbow-delimiters-depth-3">(</span>ruby-backend . lsp<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Note:</b> you can easily add a directory local variable with <code>SPC f v d</code>.
</p>
</div>

<div id="outline-container-robe" class="outline-4">
<h4 id="robe"><span class="section-number-4">2.1.1.</span> Robe</h4>
<div class="outline-text-4" id="text-robe">
<p>
The default Ruby-mode backend. See Prerequisites for the necessary Gems to support Robe.
</p>
</div>
</div>

<div id="outline-container-language-server-protocol" class="outline-4">
<h4 id="language-server-protocol"><span class="section-number-4">2.1.2.</span> Language Server Protocol</h4>
<div class="outline-text-4" id="text-language-server-protocol">
<p>
IDE-like backend for Ruby. The only prerequisite gem is <code>solargraph</code> which can be
installed globally with:
</p>

<div class="org-src-container">
<pre class="src src-sh">gem install solargraph
</pre>
</div>

<p>
LSP also supports the DAP debugger which will be automatically configured upon
using the LSP backend. Dap-mode can be setup here:
<a href="https://github.com/emacs-lsp/dap-mode#ruby">https://github.com/emacs-lsp/dap-mode#ruby</a>
</p>
</div>
</div>
</div>

<div id="outline-container-prerequisites" class="outline-3">
<h3 id="prerequisites"><span class="section-number-3">2.2.</span> Prerequisites</h3>
<div class="outline-text-3" id="text-prerequisites">
<p>
Some of the advanced features supported by this layer depend on external gems
that need to be installed in the context of your project (see below for guidance
based on your version manager):
</p>
<ul class="org-ul">
<li><code>pry</code> and <code>pry-doc</code> are required for <b>jump to definition</b> and <b>code documentation</b> (<code>robe-mode</code>)</li>
<li><code>ruby_parser</code> is required for <b>goto-step<sub>definition</sub></b> in <code>feature-mode</code></li>
<li><code>rubocop</code> is required for rubocop integration</li>
<li><code>prettier</code> is required for formatter</li>
<li><code>seeing_is_believing</code> helps you evaluate code inline</li>
<li><code>solargraph</code> is required for using the language server protocol in <code>ruby-mode</code></li>
</ul>

<p>
You can install the gems in the context of your current project by
adding them to the <code>Gemfile</code>, e.g.:
</p>

<div class="org-src-container">
<pre class="src src-ruby">gem <span class="org-string">'pry'</span>
</pre>
</div>

<p>
or on the command line (please refer to your ruby version manager
specific documentation for details and caveats):
</p>

<div class="org-src-container">
<pre class="src src-sh">gem install pry
</pre>
</div>
</div>
</div>

<div id="outline-container-ruby-version-management" class="outline-3">
<h3 id="ruby-version-management"><span class="section-number-3">2.3.</span> Ruby version management</h3>
<div class="outline-text-3" id="text-ruby-version-management">
<p>
This layer supports <a href="https://rvm.io/">RVM</a>, <a href="https://github.com/rbenv/rbenv">Rbenv</a>, and <a href="https://github.com/postmodern/chruby">Chruby</a>. You can choose the default version
manager by setting the variable <code>ruby-version-manager</code> in your dotfile, for
example:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">dotspacemacs-configuration-layers</span> <span class="org-rainbow-delimiters-depth-2">()</span>
   '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>ruby <span class="org-builtin">:variables</span> ruby-version-manager 'rvm<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
When a version manager is enabled it will use the currently activated ruby
except if a <code>.ruby-version</code> file exists in which case the ruby version of
this file is used.
<code>rvm</code> will also try to look for a <code>.rvmrc</code> and <code>gemfile</code>, the priority order is
<code>.rvmrc</code> then <code>.ruby-version</code> then <code>gemfile</code>.
</p>

<p>
Note: Only one version manager at a time can be enabled.
</p>
</div>
</div>

<div id="outline-container-test-runner" class="outline-3">
<h3 id="test-runner"><span class="section-number-3">2.4.</span> Test runner</h3>
<div class="outline-text-3" id="text-test-runner">
<p>
This layer supports <code>RSpec</code>, <code>ruby-test</code> and <code>minitest</code> test runners
(frameworks). By default <code>ruby-test</code> is used, to change to another frameworks
set the layer variable <code>ruby-test-runner</code>.
</p>

<p>
Example to set the test runner to <code>RSpec</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">dotspacemacs-configuration-layers</span> <span class="org-rainbow-delimiters-depth-2">()</span>
   '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>ruby <span class="org-builtin">:variables</span> ruby-test-runner 'rspec<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>Tip:</code> You can enable different test runners for different projects by using
directory local variables.
</p>
</div>
</div>

<div id="outline-container-formatting" class="outline-3">
<h3 id="formatting"><span class="section-number-3">2.5.</span> Formatting</h3>
<div class="outline-text-3" id="text-formatting">
<p>
If you'd like to use <a href="https://github.com/prettier/plugin-ruby">prettier/plugin-ruby</a> to format on save:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">dotspacemacs-configuration-layers</span> <span class="org-rainbow-delimiters-depth-2">()</span>
   '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>ruby <span class="org-builtin">:variables</span> ruby-prettier-on-save t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Note that the <code>prettier</code> binary must be available in the project's
<code>node_modules/.bin/</code> or on <code>exec-path</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-key-bindings" class="outline-2">
<h2 id="key-bindings"><span class="section-number-2">3.</span> Key bindings</h2>
<div class="outline-text-2" id="text-key-bindings">
</div>

<div id="outline-container-ruby-enh-ruby-mode-robe-inf-ruby-ruby-tools" class="outline-3">
<h3 id="ruby-enh-ruby-mode-robe-inf-ruby-ruby-tools"><span class="section-number-3">3.1.</span> Ruby (enh-ruby-mode, robe, inf-ruby, ruby-tools)</h3>
<div class="outline-text-3" id="text-ruby-enh-ruby-mode-robe-inf-ruby-ruby-tools">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m g g</code></td>
<td class="org-left">go to definition (robe-jump)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m h h</code></td>
<td class="org-left">show documentation for method at point (robe-doc)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s b</code></td>
<td class="org-left">send buffer</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s B</code></td>
<td class="org-left">send buffer and switch to REPL</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s f</code></td>
<td class="org-left">send function definition</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s F</code></td>
<td class="org-left">send function definition and switch to REPL</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s i</code></td>
<td class="org-left">start REPL</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s l</code></td>
<td class="org-left">send line</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s L</code></td>
<td class="org-left">send line and switch to REPL</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s r</code></td>
<td class="org-left">send region</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s R</code></td>
<td class="org-left">send region and switch to REPL</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s s</code></td>
<td class="org-left">switch to REPL</td>
</tr>

<tr>
<td class="org-left">~SPC m x '​~</td>
<td class="org-left">Change symbol or <code>"</code> string to <code>'</code></td>
</tr>

<tr>
<td class="org-left">~SPC m x "​~</td>
<td class="org-left">Change symbol or <code>'</code> string to <code>"</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC m x :</code></td>
<td class="org-left">Change string to symbol</td>
</tr>

<tr>
<td class="org-left"><code>SPC m x h</code></td>
<td class="org-left">toggle hash syntax in active region</td>
</tr>

<tr>
<td class="org-left"><code>SPC m = =</code></td>
<td class="org-left">format buffer using prettier</td>
</tr>

<tr>
<td class="org-left"><code>%</code></td>
<td class="org-left"><a href="https://github.com/redguardtoo/evil-matchit">evil-matchit</a> jumps between blocks</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-debugger" class="outline-3">
<h3 id="debugger"><span class="section-number-3">3.2.</span> Debugger</h3>
<div class="outline-text-3" id="text-debugger">
<p>
Using the <code>dap</code> layer you'll get access to all the DAP key bindings, see the
complete list of key bindings on the <a href="https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Btools/dap#key-bindings">dap layer description</a>.
</p>
</div>
</div>

<div id="outline-container-bundler" class="outline-3">
<h3 id="bundler"><span class="section-number-3">3.3.</span> Bundler</h3>
<div class="outline-text-3" id="text-bundler">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m b c</code></td>
<td class="org-left">run bundle check</td>
</tr>

<tr>
<td class="org-left"><code>SPC m b i</code></td>
<td class="org-left">run bundle install</td>
</tr>

<tr>
<td class="org-left"><code>SPC m b s</code></td>
<td class="org-left">run bundle console</td>
</tr>

<tr>
<td class="org-left"><code>SPC m b u</code></td>
<td class="org-left">run bundle update</td>
</tr>

<tr>
<td class="org-left"><code>SPC m b x</code></td>
<td class="org-left">run bundle exec</td>
</tr>

<tr>
<td class="org-left"><code>SPC m b o</code></td>
<td class="org-left">run bundle open</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-rubocop" class="outline-3">
<h3 id="rubocop"><span class="section-number-3">3.4.</span> RuboCop</h3>
<div class="outline-text-3" id="text-rubocop">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m = r</code></td>
<td class="org-left">Format the current buffer using RuboCop</td>
</tr>

<tr>
<td class="org-left"><code>SPC m R r f</code></td>
<td class="org-left">Runs RuboCop on the currently visited file</td>
</tr>

<tr>
<td class="org-left"><code>SPC m R r F</code></td>
<td class="org-left">Runs auto-correct on the currently visited file</td>
</tr>

<tr>
<td class="org-left"><code>SPC m R r d</code></td>
<td class="org-left">Prompts from a directory on which to run RuboCop</td>
</tr>

<tr>
<td class="org-left"><code>SPC m R r D</code></td>
<td class="org-left">Prompts for a directory on which to run auto-correct</td>
</tr>

<tr>
<td class="org-left"><code>SPC m R r p</code></td>
<td class="org-left">Runs RuboCop on the entire project</td>
</tr>

<tr>
<td class="org-left"><code>SPC m R r P</code></td>
<td class="org-left">Runs auto-correct on the project</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-tests" class="outline-3">
<h3 id="tests"><span class="section-number-3">3.5.</span> Tests</h3>
<div class="outline-text-3" id="text-tests">
</div>

<div id="outline-container-rspec-mode" class="outline-4">
<h4 id="rspec-mode"><span class="section-number-4">3.5.1.</span> RSpec-mode</h4>
<div class="outline-text-4" id="text-rspec-mode">
<p>
When <code>ruby-test-runner</code> equals <code>rspec</code>.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m t a</code></td>
<td class="org-left">run all specs</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t b</code></td>
<td class="org-left">run current spec file</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t c</code></td>
<td class="org-left">run the current spec file and subsequent ones</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t d</code></td>
<td class="org-left">run tests in a directory</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t e</code></td>
<td class="org-left">mark example as pending</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t f</code></td>
<td class="org-left">run method</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t l</code></td>
<td class="org-left">run last failed spec</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t m</code></td>
<td class="org-left">run specs related to the current buffer</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t r</code></td>
<td class="org-left">re-run last spec</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t t</code></td>
<td class="org-left">run spec at pointer</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t TAB</code></td>
<td class="org-left">toggle between spec's and target's buffer</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t ~</code></td>
<td class="org-left">toggle between spec's and target's buffer find example</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-ruby-test-mode" class="outline-4">
<h4 id="ruby-test-mode"><span class="section-number-4">3.5.2.</span> Ruby-test-mode</h4>
<div class="outline-text-4" id="text-ruby-test-mode">
<p>
When <code>ruby-test-runner</code> equals <code>ruby-test</code>.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m t b</code></td>
<td class="org-left">run test file</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t t</code></td>
<td class="org-left">run test at pointer</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-minitest-mode" class="outline-4">
<h4 id="minitest-mode"><span class="section-number-4">3.5.3.</span> minitest-mode</h4>
<div class="outline-text-4" id="text-minitest-mode">
<p>
When <code>ruby-test-runner</code> equals <code>minitest</code>.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m t a</code></td>
<td class="org-left">run all tests</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t b</code></td>
<td class="org-left">run current file</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t r</code></td>
<td class="org-left">repeat last test command</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t s</code></td>
<td class="org-left">run test for current file</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-toggles" class="outline-3">
<h3 id="toggles"><span class="section-number-3">3.6.</span> Toggles</h3>
<div class="outline-text-3" id="text-toggles">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m T '</code></td>
<td class="org-left">Toggle quotes of current string (only built-in mode)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m T {</code></td>
<td class="org-left">Toggle style of current block (only built-in mode)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-rake" class="outline-3">
<h3 id="rake"><span class="section-number-3">3.7.</span> Rake</h3>
<div class="outline-text-3" id="text-rake">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m k k</code></td>
<td class="org-left">Runs rake</td>
</tr>

<tr>
<td class="org-left"><code>SPC m k r</code></td>
<td class="org-left">Re-runs the last rake task</td>
</tr>

<tr>
<td class="org-left"><code>SPC m k R</code></td>
<td class="org-left">Regenerates the rake cache</td>
</tr>

<tr>
<td class="org-left"><code>SPC m k f</code></td>
<td class="org-left">Finds definition of a rake task</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-refactor" class="outline-3">
<h3 id="refactor"><span class="section-number-3">3.8.</span> Refactor</h3>
<div class="outline-text-3" id="text-refactor">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m r e m</code></td>
<td class="org-left">Extract to method</td>
</tr>

<tr>
<td class="org-left"><code>SPC m r e v</code></td>
<td class="org-left">Extract local variable</td>
</tr>

<tr>
<td class="org-left"><code>SPC m r e c</code></td>
<td class="org-left">Extract constant</td>
</tr>

<tr>
<td class="org-left"><code>SPC m r e l</code></td>
<td class="org-left">Extract to let (rspec)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-seeing-is-believing" class="outline-3">
<h3 id="seeing-is-believing"><span class="section-number-3">3.9.</span> Seeing is believing</h3>
<div class="outline-text-3" id="text-seeing-is-believing">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&lt;SPC&gt; m @ @</code></td>
<td class="org-left">Run seeing is believing</td>
</tr>

<tr>
<td class="org-left"><code>&lt;SPC&gt; m @ c</code></td>
<td class="org-left">Clear seeing is believing output</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-configuration" class="outline-2">
<h2 id="configuration"><span class="section-number-2">4.</span> Configuration</h2>
<div class="outline-text-2" id="text-configuration">
</div>

<div id="outline-container-layer-options" class="outline-3">
<h3 id="layer-options"><span class="section-number-3">4.1.</span> Layer options</h3>
<div class="outline-text-3" id="text-layer-options">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Default value</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>ruby-enable-enh-ruby-mode</code></td>
<td class="org-left"><code>nil</code></td>
<td class="org-left">If non-nil, use <code>enh-ruby-mode</code> package instead of the built-in Ruby Mode.</td>
</tr>

<tr>
<td class="org-left"><code>ruby-version-manager</code></td>
<td class="org-left"><code>nil</code></td>
<td class="org-left">If non nil, defines the Ruby version manager.Possible values are <code>rbenv</code>, <code>rvm</code> or <code>chruby</code>.</td>
</tr>

<tr>
<td class="org-left"><code>ruby-test-runner</code></td>
<td class="org-left"><code>ruby-test</code></td>
<td class="org-left">Test runner to use. Possible values are <code>ruby-test</code>, <code>minitest</code> or <code>rspec</code>.</td>
</tr>

<tr>
<td class="org-left"><code>ruby-highlight-debugger-keywords</code></td>
<td class="org-left"><code>t</code></td>
<td class="org-left">If non-nil, enable highlight for debugger keywords.</td>
</tr>

<tr>
<td class="org-left"><code>ruby-backend</code></td>
<td class="org-left"><code>robe</code></td>
<td class="org-left">Defines the backend for IDE feature. Possible values are <code>robe</code> or <code>lsp</code>.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-disabling-the-automatic-insertion-of-encoding-comment" class="outline-3">
<h3 id="disabling-the-automatic-insertion-of-encoding-comment"><span class="section-number-3">4.2.</span> Disabling the automatic insertion of encoding comment</h3>
<div class="outline-text-3" id="text-disabling-the-automatic-insertion-of-encoding-comment">
<p>
Note that <code>ruby-mode</code> and <code>enh-ruby-mode</code> will automatically insert the encoding comment <code># coding: utf-8</code> at the top of a <code>`.rb</code> file, if it contains UTF-8 characters. This might not be desired in Ruby 2.0+, since UTF-8 has become the default encoding. In fact, this will trigger <a href="https://www.rubydoc.info/github/bbatsov/RuboCop/RuboCop/Cop/Style/Encoding">an error</a> with Robocop.
</p>

<p>
<a href="https://stackoverflow.com/questions/6453955/how-do-i-prevent-emacs-from-adding-coding-information-in-the-first-line">The fix</a> is to set the variable <code>ruby-insert-encoding-magic-comment</code> (<code>ruby-mode</code>) or <code>enh-ruby-add-encoding-comment-on-save</code> (<code>enh-ruby-mode</code>) to <code>nil</code>, e.g.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">dotspacemacs-configuration-layers</span> <span class="org-rainbow-delimiters-depth-2">()</span>
   '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>ruby <span class="org-builtin">:variables</span> ruby-insert-encoding-magic-comment nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: root</p>
<p class="date">Created: 2021-07-10 Sat 13:13</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
