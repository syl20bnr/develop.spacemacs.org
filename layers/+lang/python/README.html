<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-10-05 Mon 18:53 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Python layer</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="root" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css"
                 href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
          <script src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
          <script>
          // Google Analytics
                     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
                         Date();a=s.createElement(o),
                         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                     ga('create', 'UA-28326243-2', 'auto'); ga('send', 'pageview');

          // Add permalinks to the documentation headings
          $(document).ready(function() {
              [".outline-2 h2", ".outline-3 h3", ".outline-4 h4", ".outline-5 h5"].forEach(function(i) {
                  $(i).each(function() {
                          var page_url = window.location.pathname;
                          var node = $(this).attr("id");
                          var full_url = page_url + "#" + node;
                          $(this).contents().last().after('<span id="permalink"><a href="'
                                                          + full_url + '">Â¶</a></span>');
                  });
              });
          });
          </script>
<link rel="stylesheet" type="text/css" href="../../../css/readtheorg.css" />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<div id="toggle-sidebar"><a href="#table-of-contents"><h2>Table of Contents</h2></a></div>
<h1 class="title">Python layer</h1>
<div id="table-of-contents">
<h2>Table of Contents<a href="#">Close</a></h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#description">1. Description</a>
<ul>
<li><a href="#features">1.1. Features:</a></li>
</ul>
</li>
<li><a href="#install">2. Install</a>
<ul>
<li><a href="#layer">2.1. Layer</a></li>
<li><a href="#choosing-a-backend">2.2. Choosing a backend</a></li>
</ul>
</li>
<li><a href="#backends">3. Backends</a>
<ul>
<li><a href="#anaconda">3.1. Anaconda</a></li>
<li><a href="#language-server-protocol">3.2. Language Server Protocol</a>
<ul>
<li><a href="#python-language-server">3.2.1. python-language-server</a></li>
<li><a href="#microsoft-python-language-server">3.2.2. Microsoft python language server</a></li>
<li><a href="#microsoft-pyright-language-server">3.2.3. Microsoft pyright language server</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#additional-tools">4. Additional tools</a>
<ul>
<li><a href="#syntax-checking">4.1. Syntax checking</a></li>
<li><a href="#test-runner">4.2. Test runner</a></li>
<li><a href="#buffer-formatting">4.3. Buffer formatting</a></li>
<li><a href="#automatic-buffer-formatting-on-save">4.4. Automatic buffer formatting on save</a></li>
<li><a href="#automatic-save-of-buffer-when-testing">4.5. Automatic save of buffer when testing</a></li>
<li><a href="#autoflake">4.6. autoflake</a></li>
<li><a href="#pylookup">4.7. pylookup</a></li>
<li><a href="#dap-mode-debugger-only-for-lsp-backend">4.8. dap-mode debugger (only for lsp backend)</a></li>
</ul>
</li>
<li><a href="#configuration">5. Configuration</a>
<ul>
<li><a href="#fill-column">5.1. Fill column</a></li>
<li><a href="#sort-imports">5.2. Sort imports</a></li>
<li><a href="#importmagic">5.3. Importmagic</a></li>
<li><a href="#pyvenv-pyenv-and-pipenv">5.4. Pyvenv, pyenv and pipenv</a></li>
</ul>
</li>
<li><a href="#management-of-python-versions-and-virtual-environments">6. Management of Python versions and virtual environments</a>
<ul>
<li><a href="#manage-virtual-environments-with-pyvenv">6.1. Manage virtual environments with pyvenv</a>
<ul>
<li><a href="#automatic-activation-of-local-virtual-environment">6.1.1. Automatic activation of local virtual environment</a></li>
</ul>
</li>
<li><a href="#manage-multiple-python-versions-with-pyenv">6.2. Manage multiple Python versions with pyenv</a>
<ul>
<li><a href="#automatic-activation-of-local-pyenv-version">6.2.1. Automatic activation of local pyenv version</a></li>
</ul>
</li>
<li><a href="#manage-environments-and-packages-with-pipenv">6.3. Manage environments and packages with pipenv</a></li>
</ul>
</li>
<li><a href="#key-bindings">7. Key bindings</a>
<ul>
<li><a href="#inferior-repl-process">7.1. Inferior REPL process</a></li>
<li><a href="#running-python-script-in-shell">7.2. Running Python Script in shell</a></li>
<li><a href="#testing">7.3. Testing</a></li>
<li><a href="#refactoring">7.4. Refactoring</a></li>
<li><a href="#pip-package-management">7.5. Pip package management</a></li>
<li><a href="#live-coding">7.6. Live coding</a></li>
<li><a href="#other-python-commands">7.7. Other Python commands</a></li>
<li><a href="#debugger">7.8. Debugger</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="orgc6bceb8" class="figure">
<p><img src="img/python.png" alt="python.png" />
</p>
</div>

<div id="outline-container-description" class="outline-2">
<h2 id="description"><span class="section-number-2">1</span> Description</h2>
<div class="outline-text-2" id="text-description">
<p>
This layer adds support for the Python language.
</p>
</div>

<div id="outline-container-features" class="outline-3">
<h3 id="features"><span class="section-number-3">1.1</span> Features:</h3>
<div class="outline-text-3" id="text-features">
<ul class="org-ul">
<li>Support for the following backends:
<ul class="org-ul">
<li><a href="https://github.com/proofit404/anaconda-mode">anaconda</a> (default),</li>
<li><a href="https://github.com/emacs-lsp/lsp-python-ms">Language Server Protocol</a> (experimental - 2 implementations),
<ul class="org-ul">
<li>python-language-server</li>
<li>Microsoft python language server</li>
</ul></li>
</ul></li>
<li>Auto-completion</li>
<li>Code Navigation</li>
<li>Documentation Lookup using <a href="https://github.com/proofit404/anaconda-mode">anaconda-mode</a> and <a href="https://github.com/tsgates/pylookup">pylookup</a></li>
<li>Test Runners using <a href="https://github.com/syl20bnr/nose.el">nose.el</a> or <a href="https://github.com/ionrock/pytest-el">pytest</a></li>
<li>Virtual Environment using <a href="https://github.com/jorgenschaefer/pyvenv">pyvenv</a> and <a href="https://github.com/yyuu/pyenv">pyenv</a> as well as <a href="https://github.com/pypa/pipenv">pipenv</a></li>
<li>semantic mode is enabled</li>
<li>PEP8 compliant formatting via <a href="https://github.com/google/yapf">YAPF</a> or <a href="https://github.com/ambv/black">black</a></li>
<li>PEP8 checks with <a href="https://pypi.python.org/pypi/flake8">flake8</a> or <a href="https://pypi.python.org/pypi/pylint/1.6.4">pylint</a></li>
<li>Suppression of unused import with <a href="https://github.com/myint/autoflake">autoflake</a></li>
<li>Use the <code>%</code> key to jump between blocks with <a href="https://github.com/redguardtoo/evil-matchit">evil-matchit</a></li>
<li>Sort imports with <a href="https://pypi.python.org/pypi/isort">isort</a></li>
<li>Fix a missing import statement with <a href="https://github.com/anachronic/importmagic.el">importmagic</a></li>
<li>Pip package manager with <a href="https://github.com/brotzeit/pippel">pippel</a></li>
<li>Interactive debugger using <a href="https://github.com/emacs-lsp/dap-mode">dap-mode</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-install" class="outline-2">
<h2 id="install"><span class="section-number-2">2</span> Install</h2>
<div class="outline-text-2" id="text-install">
</div>

<div id="outline-container-layer" class="outline-3">
<h3 id="layer"><span class="section-number-3">2.1</span> Layer</h3>
<div class="outline-text-3" id="text-layer">
<p>
To use this configuration layer, add it to your <code>~/.spacemacs</code>. You will need to
add <code>python</code> to the existing <code>dotspacemacs-configuration-layers</code> list in this
file.
</p>
</div>
</div>

<div id="outline-container-choosing-a-backend" class="outline-3">
<h3 id="choosing-a-backend"><span class="section-number-3">2.2</span> Choosing a backend</h3>
<div class="outline-text-3" id="text-choosing-a-backend">
<p>
To choose a default backend set the layer variable <code>python-backend</code>:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span>python <span class="org-builtin">:variables</span> python-backend 'anaconda<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Alternatively the <code>lsp</code> backend will be automatically chosen if the layer <code>lsp</code>
is used and you did not specify any value for <code>python-backend</code>.
</p>

<p>
Backend can be chosen on a per project basis using directory local variables
(files named <code>.dir-locals.el</code> at the root of a project), an example to use the
<code>lsp</code> backend:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">Directory Local Variables</span>
<span class="org-comment-delimiter">;;; </span><span class="org-comment">For more information see (info "(emacs) Directory Variables")</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>python-mode <span class="org-rainbow-delimiters-depth-3">(</span>python-backend . lsp<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Note:</b> you can easily add a directory local variable with <code>SPC f v d</code>.
</p>

<p>
The available options are:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">symbol</th>
<th scope="col" class="org-left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">'anaconda</td>
<td class="org-left">Default</td>
</tr>

<tr>
<td class="org-left">'lsp</td>
<td class="org-left">python-language-server package</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-backends" class="outline-2">
<h2 id="backends"><span class="section-number-2">3</span> Backends</h2>
<div class="outline-text-2" id="text-backends">
</div>

<div id="outline-container-anaconda" class="outline-3">
<h3 id="anaconda"><span class="section-number-3">3.1</span> Anaconda</h3>
<div class="outline-text-3" id="text-anaconda">
<p>
<code>anaconda-mode</code> tries to install the dependencies itself but sometimes
it does not work and you may encounter the following message when
opening a python buffer:
</p>

<pre class="example" id="org62bdb8c">
Blocking call to accept-process-output with quit inhibited!!
</pre>

<p>
To fix this, install the <code>anaconda-mode</code> <a href="https://github.com/proofit404/anaconda-mode/wiki">anaconda-deps</a> by hand:
</p>

<div class="org-src-container">
<pre class="src src-sh">pip install --upgrade <span class="org-string">"jedi&gt;=0.13.0"</span> <span class="org-string">"json-rpc&gt;=1.8.1"</span> <span class="org-string">"service_factory&gt;=0.1.5"</span>
</pre>
</div>

<p>
If you encounter problems with Jedi 1.0 consider downgrading to 0.13.0. See <a href="https://github.com/davidhalter/jedi/issues/873">this
issue</a> for details.
</p>

<p>
Source: <a href="https://github.com/proofit404/anaconda-mode#issues">https://github.com/proofit404/anaconda-mode#issues</a>
</p>

<p>
If you are facing errors such as "Unable to run anaconda-mode server", try
setting your <code>PYTHONPATH</code> as explained at
<a href="https://github.com/proofit404/anaconda-mode#pythonpath">https://github.com/proofit404/anaconda-mode#pythonpath</a>
</p>
</div>
</div>

<div id="outline-container-language-server-protocol" class="outline-3">
<h3 id="language-server-protocol"><span class="section-number-3">3.2</span> Language Server Protocol</h3>
<div class="outline-text-3" id="text-language-server-protocol">
<p>
The <code>lsp</code> backend can use either of the following language server implementations:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">symbol</th>
<th scope="col" class="org-left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">'pyls</td>
<td class="org-left">python-language-server package (default)</td>
</tr>

<tr>
<td class="org-left">'mspyls</td>
<td class="org-left">Microsoft python language server</td>
</tr>

<tr>
<td class="org-left">'pyright</td>
<td class="org-left">Microsoft pyright language server</td>
</tr>
</tbody>
</table>

<p>
<code>pyls</code> is used by default - to use the Microsoft python language server, set the
<code>python-lsp-server</code> layer variable as follows:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span>python <span class="org-builtin">:variables</span> python-backend 'lsp python-lsp-server 'mspyls<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
To setup the pyright language server instead, use:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span>python <span class="org-builtin">:variables</span> python-backend 'lsp python-lsp-server 'pyright<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-python-language-server" class="outline-4">
<h4 id="python-language-server"><span class="section-number-4">3.2.1</span> python-language-server</h4>
<div class="outline-text-4" id="text-python-language-server">
<p>
You just have to install python language server package:
</p>

<div class="org-src-container">
<pre class="src src-sh">pip install python-language-server<span class="org-rainbow-delimiters-depth-1">[</span>all<span class="org-rainbow-delimiters-depth-1">]</span>
</pre>
</div>

<p>
Additionally you can install the following other packages:
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">for import sorting</span>
pip install pyls-isort
<span class="org-comment-delimiter"># </span><span class="org-comment">for mypy checking (python 3.4+ is needed)</span>
pip install pyls-mypy
pip install pyls-black
</pre>
</div>

<p>
If you've installed the language server and related packages as development
dependencies in a pipenv environment, you'll want to set the <code>python-pipenv-activate</code>
config variable to <code>t</code>. This activates your pipenv before enabling the
lsp backend.
</p>
</div>
</div>

<div id="outline-container-microsoft-python-language-server" class="outline-4">
<h4 id="microsoft-python-language-server"><span class="section-number-4">3.2.2</span> Microsoft python language server</h4>
<div class="outline-text-4" id="text-microsoft-python-language-server">
<p>
Paraphrasing the instructions provided by the author of the <code>lsp-python-ms</code> package:
</p>

<div class="org-src-container">
<pre class="src src-sh">git clone https://github.com/Microsoft/python-language-server.git
<span class="org-builtin">cd</span> python-language-server/src/LanguageServer/Impl
dotnet build -c Release
dotnet publish -c Release -r &lt;RUNTIME&gt;
</pre>
</div>

<p>
where <code>&lt;RUNTIME&gt;</code> is one of the <a href="https://docs.microsoft.com/en-us/dotnet/core/rid-catalog">runtime IDs supported by dotnet core</a>. One of <code>linux-x64</code>, <code>osx-x64</code>, <code>win10-x64</code> should
cover most use cases.
</p>

<p>
The default package configuration assumes the executable is located in a folder included in your system path.
To use the latest built version in a cloned git repo, use the <code>python-lsp-git-root</code> config variable, e.g.:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>python <span class="org-builtin">:variables</span>
            python-backend 'lsp
            python-lsp-server 'mspyls
            python-lsp-git-root <span class="org-string">"~/dev/python/python-language-server"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
N.B. If you're using Arch linux or a derivative distribution, you can install the <code>microsoft-python-language-server</code>
package from the AUR.
</p>
</div>
</div>

<div id="outline-container-microsoft-pyright-language-server" class="outline-4">
<h4 id="microsoft-pyright-language-server"><span class="section-number-4">3.2.3</span> Microsoft pyright language server</h4>
<div class="outline-text-4" id="text-microsoft-pyright-language-server">
<p>
<a href="https://github.com/microsoft/pyright">Pyright</a> is a new language server by Microsoft rewritten from scratch. Microsoft
python language server is planned to be deprecated in favor of pyright. Pyright
offers improved performance and better features compared to the old
implementation. It can be installed via yarn or npm as follows:
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">via yarn</span>
yarn global add pyright
<span class="org-comment-delimiter"># </span><span class="org-comment">or via npm</span>
npm install -g pyright
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-additional-tools" class="outline-2">
<h2 id="additional-tools"><span class="section-number-2">4</span> Additional tools</h2>
<div class="outline-text-2" id="text-additional-tools">
</div>

<div id="outline-container-syntax-checking" class="outline-3">
<h3 id="syntax-checking"><span class="section-number-3">4.1</span> Syntax checking</h3>
<div class="outline-text-3" id="text-syntax-checking">
<p>
Syntax checking uses <code>flake8</code> package:
</p>

<div class="org-src-container">
<pre class="src src-sh">pip install flake8
</pre>
</div>
</div>
</div>

<div id="outline-container-test-runner" class="outline-3">
<h3 id="test-runner"><span class="section-number-3">4.2</span> Test runner</h3>
<div class="outline-text-3" id="text-test-runner">
<p>
Both <code>nose</code> and <code>pytest</code> are supported. By default <code>nose</code> is used.
To choose your test runner set the layer variable <code>python-test-runner</code> to
either <code>nose</code> or <code>pytest</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>python <span class="org-builtin">:variables</span> python-test-runner 'pytest<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
If you need both then you can set <code>python-test-runner</code> to a list like this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>python <span class="org-builtin">:variables</span> python-test-runner '<span class="org-rainbow-delimiters-depth-4">(</span>pytest nose<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
This means that <code>pytest</code> is your primary test runner. To use the secondary test
runner you can call the test functions with a prefix argument e.g. <code>SPC u SPC m
t t</code> to run one test with <code>nose</code>.
</p>

<p>
To set project specific test runners you can set <code>python-test-runner</code> in a
directory local variable in your project root. <code>SPC f v d</code> in Spacemacs. See
<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html">the official documentation</a> for more information.
</p>

<p>
The root of the project is detected with a <code>.git</code> directory or a <code>setup.cfg</code> file.
</p>
</div>
</div>

<div id="outline-container-buffer-formatting" class="outline-3">
<h3 id="buffer-formatting"><span class="section-number-3">4.3</span> Buffer formatting</h3>
<div class="outline-text-3" id="text-buffer-formatting">
<p>
One of <a href="https://github.com/google/yapf">YAPF</a> (the default), <a href="https://github.com/ambv/black">black</a> or <code>lsp</code> may be selected as the formatter, via
<code>python-formatter</code>, as <code>yapf</code>, <code>black</code> or <code>lsp</code> respectively.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers '<span class="org-rainbow-delimiters-depth-2">(</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>python <span class="org-builtin">:variables</span> python-formatter 'yapf<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Alternatively the <code>lsp</code> formatter will be automatically chosen if the layer <code>lsp</code>
is used and you did not specify any value for <code>python-formatter</code>.
</p>

<p>
The key binding <code>SPC m =</code> invokes the selected formatter on the current buffer
when in non LSP python mode otherwise <code>SPC m ==</code> is used.
</p>

<p>
Note that a specific formatter may also be invoked unconditionally via
<code>yapfify-buffer</code>, <code>blacken-buffer</code> or <code>lsp-format-buffer</code>, provided
these are installed.
</p>
</div>
</div>

<div id="outline-container-automatic-buffer-formatting-on-save" class="outline-3">
<h3 id="automatic-buffer-formatting-on-save"><span class="section-number-3">4.4</span> Automatic buffer formatting on save</h3>
<div class="outline-text-3" id="text-automatic-buffer-formatting-on-save">
<p>
To enable automatic buffer formatting on save set the variable
<code>python-format-on-save</code> to <code>t</code>. The formatter specified by <code>python-formatter</code>
will be used.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers '<span class="org-rainbow-delimiters-depth-2">(</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>python <span class="org-builtin">:variables</span> python-format-on-save t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-automatic-save-of-buffer-when-testing" class="outline-3">
<h3 id="automatic-save-of-buffer-when-testing"><span class="section-number-3">4.5</span> Automatic save of buffer when testing</h3>
<div class="outline-text-3" id="text-automatic-save-of-buffer-when-testing">
<p>
By default a buffer is automatically saved before tests are executed upon it,
you can disable this feature by setting <code>python-save-before-test</code> to <code>nil</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers '<span class="org-rainbow-delimiters-depth-2">(</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>python <span class="org-builtin">:variables</span> python-save-before-test nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-autoflake" class="outline-3">
<h3 id="autoflake"><span class="section-number-3">4.6</span> autoflake</h3>
<div class="outline-text-3" id="text-autoflake">
<p>
To be able to suppress unused imports easily, install <a href="https://github.com/myint/autoflake">autoflake</a>:
</p>

<div class="org-src-container">
<pre class="src src-sh">pip install autoflake
</pre>
</div>
</div>
</div>

<div id="outline-container-pylookup" class="outline-3">
<h3 id="pylookup"><span class="section-number-3">4.7</span> pylookup</h3>
<div class="outline-text-3" id="text-pylookup">
<p>
To use <code>pylookup</code> on <code>SPC m h H</code>, make sure you update the database first, using
<code>SPC SPC pylookup-update</code>.
</p>
</div>
</div>

<div id="outline-container-dap-mode-debugger-only-for-lsp-backend" class="outline-3">
<h3 id="dap-mode-debugger-only-for-lsp-backend"><span class="section-number-3">4.8</span> dap-mode debugger (only for lsp backend)</h3>
<div class="outline-text-3" id="text-dap-mode-debugger-only-for-lsp-backend">
<p>
To use <code>dap-mode</code> for debugging do:
</p>

<div class="org-src-container">
<pre class="src src-bash">pip install <span class="org-string">"ptvsd&gt;=4.2"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-configuration" class="outline-2">
<h2 id="configuration"><span class="section-number-2">5</span> Configuration</h2>
<div class="outline-text-2" id="text-configuration">
</div>

<div id="outline-container-fill-column" class="outline-3">
<h3 id="fill-column"><span class="section-number-3">5.1</span> Fill column</h3>
<div class="outline-text-3" id="text-fill-column">
<p>
If you want to customize the fill column value, use something like this inside
the <code>user-init</code> function in your <code>.spacemacs</code>:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers '<span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>python <span class="org-builtin">:variables</span> python-fill-column <span class="org-highlight-numbers-number">99</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sort-imports" class="outline-3">
<h3 id="sort-imports"><span class="section-number-3">5.2</span> Sort imports</h3>
<div class="outline-text-3" id="text-sort-imports">
<p>
If you want imports to be automatically sorted when you save a file (using
<a href="https://pypi.python.org/pypi/isort">isort</a>), set the <code>python-sort-imports-on-save</code> variable in the python layer
config section:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dotspacemacs-configuration-layers
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>python <span class="org-builtin">:variables</span> python-sort-imports-on-save t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
or as a directory-local variable (for per-project settings).
</p>
</div>
</div>

<div id="outline-container-importmagic" class="outline-3">
<h3 id="importmagic"><span class="section-number-3">5.3</span> Importmagic</h3>
<div class="outline-text-3" id="text-importmagic">
<p>
Install importmagic and epc for importmagic functionality.
</p>

<div class="org-src-container">
<pre class="src src-sh">pip install importmagic epc
</pre>
</div>
</div>
</div>

<div id="outline-container-pyvenv-pyenv-and-pipenv" class="outline-3">
<h3 id="pyvenv-pyenv-and-pipenv"><span class="section-number-3">5.4</span> Pyvenv, pyenv and pipenv</h3>
<div class="outline-text-3" id="text-pyvenv-pyenv-and-pipenv">
<p>
Sometimes, it is convenient to be able to use python virtual environments from
other modes. For this reason, the python layer provides the variables
<code>spacemacs--python-pyenv-modes</code>, <code>spacemacs--python-pyvenv-modes</code> and
<code>spacemacs--python-pipenv-modes</code>. If you wish to be able to access these
functionalities from other modes, in your user config section, do:
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'spacemacs--python-pipenv-mode 'your-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
This will allow you to use <a href="https://github.com/pwalsh/pipenv.el">pipenv</a> bindings from the mode your-mode.
You can add to the other two lists analogously.
</p>
</div>
</div>
</div>

<div id="outline-container-management-of-python-versions-and-virtual-environments" class="outline-2">
<h2 id="management-of-python-versions-and-virtual-environments"><span class="section-number-2">6</span> Management of Python versions and virtual environments</h2>
<div class="outline-text-2" id="text-management-of-python-versions-and-virtual-environments">
</div>

<div id="outline-container-manage-virtual-environments-with-pyvenv" class="outline-3">
<h3 id="manage-virtual-environments-with-pyvenv"><span class="section-number-3">6.1</span> Manage virtual environments with pyvenv</h3>
<div class="outline-text-3" id="text-manage-virtual-environments-with-pyvenv">
<p>
A virtual environment provides isolation of your Python package versions. For a
general overview see <a href="http://docs.python-guide.org/en/latest/dev/virtualenvs/">this site</a>. <a href="http://virtualenvwrapper.readthedocs.io/en/latest/index.html">Virtualenvwrapper</a> which is also explained in the
previous link, is a program which manages your virtual environments in a central
location set by the <code>WORKON_HOME</code> environment variable.
</p>

<p>
Spacemacs integration of virtual environments and virtualenvwrapper is provided
by the <a href="https://github.com/jorgenschaefer/pyvenv">pyvenv</a> package. It provides the following key bindings:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m V a</code></td>
<td class="org-left">activate a virtual environment in any directory</td>
</tr>

<tr>
<td class="org-left"><code>SPC m V d</code></td>
<td class="org-left">deactivate active virtual environment</td>
</tr>

<tr>
<td class="org-left"><code>SPC m V w</code></td>
<td class="org-left">work on virtual environment in <code>WORKON_HOME</code></td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-automatic-activation-of-local-virtual-environment" class="outline-4">
<h4 id="automatic-activation-of-local-virtual-environment"><span class="section-number-4">6.1.1</span> Automatic activation of local virtual environment</h4>
<div class="outline-text-4" id="text-automatic-activation-of-local-virtual-environment">
<p>
By default Spacemacs uses the <a href="https://github.com/jorgenschaefer/pyvenv">pyvenv</a> package to manage virtual environments.
Additionally it uses <code>pyvenv-tracking-mode</code> to activate a buffer's local virtual
environment on change of focus. Pyvenv determines which virtual environment to
use from the value of the <code>pyvenv-workon</code> or the <code>pyvenv-activate</code>
buffer-local-variable. Spacemacs scans the project directory for a pattern
<code>.venv</code>. If the found <code>.venv</code> is a directory then it sets that directory as the
local virtual environment path. If the <code>.venv</code> pattern is a file then it checks if
its first line matches an existing path and if so, it sets it as the local
virtual environment path. Finally it checks if it finds an existing directory
with the name of the first line in the <code>pyvenv-workon-home</code> directory. By default
Spacemacs scans for a virtual environment and sets the local <code>pyvenv-workon</code> or
the <code>pyvenv-activate</code> variables on visiting a file, but switches virtual
environment on every change of focus using the local variables. The buffer
tracking behavior can be disabled by setting the value of the customizable
variable <code>pyvenv-tracking-mode</code> to <code>nil</code>. The scanning behavior can be set via the
variable <code>python-auto-set-local-pyvenv-virtualenv</code> to:
</p>
<ul class="org-ul">
<li><code>on-visit</code> (default) set the virtualenv when you visit a python buffer,</li>
<li><code>on-project-switch</code> set the virtualenv when you switch projects,</li>
<li><code>nil</code> to disable.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-manage-multiple-python-versions-with-pyenv" class="outline-3">
<h3 id="manage-multiple-python-versions-with-pyenv"><span class="section-number-3">6.2</span> Manage multiple Python versions with pyenv</h3>
<div class="outline-text-3" id="text-manage-multiple-python-versions-with-pyenv">
<p>
If you need multiple Python versions (e.g. Python 2 and Python 3) then take a
look at <a href="https://github.com/yyuu/pyenv">pyenv</a>. It enables the installation and management of multiple
Python versions.
<a href="https://www.brianthicks.com/post/2015/04/15/automate-your-python-environment-with-pyenv/">This blogpost</a> gives a good overview on how to use the tool. Spacemacs
integration is provided by <a href="https://github.com/proofit404/pyenv-mode">pyenv mode</a> which has the following key bindings.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m v s</code></td>
<td class="org-left">set a pyenv environment with <a href="https://github.com/pyenv/pyenv">pyenv</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v u</code></td>
<td class="org-left">unset a pyenv environment with <a href="https://github.com/pyenv/pyenv">pyenv</a></td>
</tr>
</tbody>
</table>

<p>
Pyenv can also manage virtual environments for each of the Python versions it
has installed. Those will be listed alongside your Python versions.
</p>
</div>

<div id="outline-container-automatic-activation-of-local-pyenv-version" class="outline-4">
<h4 id="automatic-activation-of-local-pyenv-version"><span class="section-number-4">6.2.1</span> Automatic activation of local pyenv version</h4>
<div class="outline-text-4" id="text-automatic-activation-of-local-pyenv-version">
<p>
A project-specific pyenv version may be written to a file called
<code>.python-version</code> using the <a href="https://github.com/yyuu/pyenv/blob/master/COMMANDS.md#user-content-pyenv-local">pyenv local</a> command.
</p>

<p>
Spacemacs can search in parent directories for this file, and automatically set
the pyenv version. The behavior can be set with the variable
<code>python-auto-set-local-pyenv-version</code> to:
</p>
<ul class="org-ul">
<li><code>on-visit</code> (default) set the version when you visit a python buffer,</li>
<li><code>on-project-switch</code> set the version when you switch projects,</li>
<li><code>nil</code> to disable.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-manage-environments-and-packages-with-pipenv" class="outline-3">
<h3 id="manage-environments-and-packages-with-pipenv"><span class="section-number-3">6.3</span> Manage environments and packages with pipenv</h3>
<div class="outline-text-3" id="text-manage-environments-and-packages-with-pipenv">
<p>
<a href="https://pipenv.kennethreitz.org/en/latest/">Pipenv</a> is the new standard tool to manage your virtual environments. It can act as
a replacement for both <code>pyenv</code> and <code>venv</code> on a per-repository basis. An overview
of how to use the tool is provided <a href="https://pipenv.kennethreitz.org/en/latest/basics/">here</a>.
</p>

<p>
Spacemacs integration for pipenv is provided by the <a href="https://github.com/pwalsh/pipenv.el">pipenv package</a>.
It provides the following key bindings:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m v p a</code></td>
<td class="org-left">activate a pipenv environment with <a href="https://github.com/pwalsh/pipenv.el">pipenv</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p d</code></td>
<td class="org-left">deactivate a pipenv environment with <a href="https://github.com/pwalsh/pipenv.el">pipenv</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p i</code></td>
<td class="org-left">install a package into a virtual environment with <a href="https://github.com/pwalsh/pipenv.el">pipenv</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p o</code></td>
<td class="org-left">open an installed module in a new buffer with <a href="https://github.com/pwalsh/pipenv.el">pipenv</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p s</code></td>
<td class="org-left">open a shell buffer in the current environment with <a href="https://github.com/pwalsh/pipenv.el">pipenv</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p u</code></td>
<td class="org-left">uninstall a package from a virtual environment with <a href="https://github.com/pwalsh/pipenv.el">pipenv</a></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-key-bindings" class="outline-2">
<h2 id="key-bindings"><span class="section-number-2">7</span> Key bindings</h2>
<div class="outline-text-2" id="text-key-bindings">
</div>

<div id="outline-container-inferior-repl-process" class="outline-3">
<h3 id="inferior-repl-process"><span class="section-number-3">7.1</span> Inferior REPL process</h3>
<div class="outline-text-3" id="text-inferior-repl-process">
<p>
Start a Python or iPython inferior REPL process with <code>SPC m s i</code>.
If <code>ipython</code> is available in system executable search paths, <code>ipython</code>
will be used to launch python shell; otherwise, default <code>python</code>
interpreter will be used. You may change your system executable
search path by activating a virtual environment.
</p>

<p>
Send code to inferior process commands:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m s b</code></td>
<td class="org-left">send buffer and keep code buffer focused</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s B</code></td>
<td class="org-left">send buffer and switch to REPL in insert mode</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s e</code></td>
<td class="org-left">send statement and keep code buffer focused</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s E</code></td>
<td class="org-left">send statement and switch to REPL in insert mode</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s f</code></td>
<td class="org-left">send function and keep code buffer focused</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s F</code></td>
<td class="org-left">send function and switch to REPL in insert mode</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s i</code></td>
<td class="org-left">start inferior REPL process</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s l</code></td>
<td class="org-left">send line and keep code buffer focused</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s r</code></td>
<td class="org-left">send region and keep code buffer focused</td>
</tr>

<tr>
<td class="org-left"><code>SPC m s R</code></td>
<td class="org-left">send region and switch to REPL in insert mode</td>
</tr>

<tr>
<td class="org-left"><code>CTRL+j</code></td>
<td class="org-left">next item in REPL history</td>
</tr>

<tr>
<td class="org-left"><code>CTRL+k</code></td>
<td class="org-left">previous item in REPL history</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-running-python-script-in-shell" class="outline-3">
<h3 id="running-python-script-in-shell"><span class="section-number-3">7.2</span> Running Python Script in shell</h3>
<div class="outline-text-3" id="text-running-python-script-in-shell">
<p>
To run a Python script like you would in the shell press <code>SPC m c c</code>
to start the Python script in comint mode. This is useful when working with
multiple Python files since the REPL does not reload changes made in other
modules.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m c c</code></td>
<td class="org-left">Execute current file in a comint shell</td>
</tr>

<tr>
<td class="org-left"><code>SPC m c C</code></td>
<td class="org-left">Execute current file in a comint shell and switch to it in <code>insert state</code></td>
</tr>
</tbody>
</table>

<p>
<b>Note:</b> With the universal argument <code>SPC u</code> you can enter a new
compilation command.
</p>
</div>
</div>

<div id="outline-container-testing" class="outline-3">
<h3 id="testing"><span class="section-number-3">7.3</span> Testing</h3>
<div class="outline-text-3" id="text-testing">
<p>
Test commands start with <code>m t</code>. To use the secondary test runner call the
function with a prefix argument, for example <code>SPC u SPC m t a</code>.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">No Debug</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m t a</code></td>
<td class="org-left">launch all tests of the project</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t b</code></td>
<td class="org-left">launch all tests of the current buffer (same as module)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t l</code></td>
<td class="org-left">launch last tests</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t m</code></td>
<td class="org-left">launch all tests of the current module</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t s</code></td>
<td class="org-left">launch all tests of the current suite (only with <code>nose</code>)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t t</code></td>
<td class="org-left">launch the current test (function)</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Debug</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m t A</code></td>
<td class="org-left">launch all tests of the project in debug mode</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t B</code></td>
<td class="org-left">launch all tests of the current buffer (module) in debug mode</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t M</code></td>
<td class="org-left">launch all tests of the current module in debug mode</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t S</code></td>
<td class="org-left">launch all tests of the current suite in debug mode (only with <code>nose</code>)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m t T</code></td>
<td class="org-left">launch the current test (function) in debug mode</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-refactoring" class="outline-3">
<h3 id="refactoring"><span class="section-number-3">7.4</span> Refactoring</h3>
<div class="outline-text-3" id="text-refactoring">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m r f</code></td>
<td class="org-left">fix a missing import statement with <a href="https://pypi.python.org/pypi/importmagic">importmagic</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m r i</code></td>
<td class="org-left">remove unused imports with <a href="https://github.com/myint/autoflake">autoflake</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m r I</code></td>
<td class="org-left">sort imports with <a href="https://pypi.python.org/pypi/isort">isort</a></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-pip-package-management" class="outline-3">
<h3 id="pip-package-management"><span class="section-number-3">7.5</span> Pip package management</h3>
<div class="outline-text-3" id="text-pip-package-management">
<p>
In python buffer type <code>SPC m P</code> to open buffer listing all installed <code>pip</code>
packages in the currently activated virtual environment.
</p>

<p>
<b>Note:</b> To open this menu from outside a python buffer type
<code>SPC SPC pippel-list-packages RET</code>.
</p>

<p>
In the package list buffer:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>RET</code></td>
<td class="org-left">follow link (<code>pippel-menu-visit-homepage</code>)</td>
</tr>

<tr>
<td class="org-left"><code>d</code></td>
<td class="org-left">mark for deletion (<code>pippel-menu-mark-delete</code>)</td>
</tr>

<tr>
<td class="org-left"><code>i</code></td>
<td class="org-left">prompt user for packages (<code>pippel-install-package</code>)</td>
</tr>

<tr>
<td class="org-left"><code>m</code></td>
<td class="org-left">remove mark (<code>pippel-menu-mark-unmark</code>)</td>
</tr>

<tr>
<td class="org-left"><code>r</code></td>
<td class="org-left">refresh package list (<code>pippel-list-packages</code>)</td>
</tr>

<tr>
<td class="org-left"><code>U</code></td>
<td class="org-left">mark all upgradable (<code>pippel-menu-mark-all-upgrades</code>)</td>
</tr>

<tr>
<td class="org-left"><code>u</code></td>
<td class="org-left">mark for upgrade (<code>pippel-menu-mark-upgrade</code>)</td>
</tr>

<tr>
<td class="org-left"><code>x</code></td>
<td class="org-left">perform marked package menu actions (<code>pippel-menu-execute</code>)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-live-coding" class="outline-3">
<h3 id="live-coding"><span class="section-number-3">7.6</span> Live coding</h3>
<div class="outline-text-3" id="text-live-coding">
<p>
Live coding is provided by the <a href="https://github.com/donkirkby/live-py-plugin">live-py-plugin.</a>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m l</code></td>
<td class="org-left">Toggle live-py-mode</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-other-python-commands" class="outline-3">
<h3 id="other-python-commands"><span class="section-number-3">7.7</span> Other Python commands</h3>
<div class="outline-text-3" id="text-other-python-commands">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key binding</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC m =</code> or <code>SPC m = =</code></td>
<td class="org-left">reformat the buffer using default formatter specified in <code>python-formatter</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC m d b</code></td>
<td class="org-left">toggle a breakpoint using <code>wdb</code>, <code>ipdb</code>, <code>pudb</code>, <code>pdb</code> or <code>python3.7</code> (and above)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g a</code></td>
<td class="org-left">go to assignment using <code>anaconda-mode-find-assignments</code> (<code>C-o</code> to jump back)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g b</code></td>
<td class="org-left">jump back</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g g</code></td>
<td class="org-left">go to definition using <code>anaconda-mode-find-definitions</code> (<code>C-o</code> to jump back)</td>
</tr>

<tr>
<td class="org-left"><code>SPC m g u</code></td>
<td class="org-left">navigate between usages with <code>anaconda-mode-find-references</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC m h d</code></td>
<td class="org-left">look for documentation using <code>helm-pydoc</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC m h h</code></td>
<td class="org-left">quick documentation using anaconda</td>
</tr>

<tr>
<td class="org-left"><code>SPC m h H</code></td>
<td class="org-left">open documentation in <code>firefox</code> using <a href="https://github.com/tsgates/pylookup">pylookup</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m S d</code></td>
<td class="org-left">insert doc-string skeleton using <a href="https://github.com/naiquevin/sphinx-doc.el">sphinx-doc</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v a</code></td>
<td class="org-left">activate a virtual environment in any directory</td>
</tr>

<tr>
<td class="org-left"><code>SPC m v d</code></td>
<td class="org-left">deactivate active virtual environment</td>
</tr>

<tr>
<td class="org-left"><code>SPC m v s</code></td>
<td class="org-left">set a pyenv environment with <a href="https://github.com/pyenv/pyenv">pyenv</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v u</code></td>
<td class="org-left">unset a pyenv environment with <a href="https://github.com/pyenv/pyenv">pyenv</a></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v w</code></td>
<td class="org-left">work on virtual environment in <code>WORKON_HOME</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p a</code></td>
<td class="org-left">activate pipenv in current project</td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p d</code></td>
<td class="org-left">deactivate pipenv in current project</td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p i</code></td>
<td class="org-left">install module into pipenv environment</td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p o</code></td>
<td class="org-left">open pipenv module in buffer</td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p s</code></td>
<td class="org-left">launch pipenv shell in current project</td>
</tr>

<tr>
<td class="org-left"><code>SPC m v p u</code></td>
<td class="org-left">uninstall module from pipenv environment</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-debugger" class="outline-3">
<h3 id="debugger"><span class="section-number-3">7.8</span> Debugger</h3>
<div class="outline-text-3" id="text-debugger">
<p>
Using the <code>dap</code> layer you'll get access to all the DAP key bindings, see the
complete list of key bindings on the <a href="https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Btools/dap#key-bindings">dap layer description</a>.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: root</p>
<p class="date">Created: 2020-10-05 Mon 18:53</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
